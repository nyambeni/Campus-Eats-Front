<main class="d-flex align-items-center min-vh-100 py-3 py-md-0">
  <div class="container">
    <div class="card register-card">
      <div class="row no-gutters">
        <div class="col-md-7">
          <img src="assets/images/sphatlho1.jpg" alt="login" class="register-card-img">
        </div>
        <div class="col-md-5">
          <div class="card-body">
            <div class="brand-wrapper">
              <img src="assets/images/Campus-Eats-Logo.jpg" alt="logo" class="logo">
            </div>
            <p class="register-card-description">Register a new account</p>

            <form #registerForm="ngForm" (ngSubmit)="saveRegister(registerForm)"> 
              

              <div class="form-group" [class.is-invalid]="usernameControl.invalid && usernameControl.touched"
                [class.pass-input]="usernameControl.valid">
                <div class="input-group">
                  <input id="username" placeholder="Username" type="text" name="username" class="form-control"
                    [(ngModel)]="user.username" #usernameControl="ngModel" pattern="(?=.*[a-z]).{2,}" required>
                  <span class="help-block" *ngIf="usernameControl.invalid && usernameControl.touched">
                    Username must contain minimum of 2 characters
                  </span>
                </div>
              </div>


              <div class="form-group" [class.has-error]="emailControl.invalid && emailControl.touched"
                [class.pass-input]="emailControl.valid">
                <div class="input-group">
                  <input id="email" placeholder="Email" type="email" name="email" class="form-control" [(ngModel)]="user.email" #emailControl="ngModel"
                    pattern="^[a-zA-Z0-9_.+-]+@(?:(?:[a-zA-Z0-9-]+\.)?[a-zA-Z]+\.)?(gmail)\.com$" required>
                  <span class="help-block" *ngIf="emailControl.errors?.required && emailControl.touched">
                    Email is required
                  </span>
                  <span class="help-block" *ngIf="emailControl.errors?.pattern && emailControl.touched">
                    Email is invalid
                  </span>
                </div>
              </div>

              <div ngModelGroup="passwordGroup" [class.error-passwordGroup]="confirmPassword.touched && confirmPassword.invalid 
                  && !confirmPassword.errors?.required" 
                 
                  [class.pass-passwordGroup]="confirmPassword.touched && confirmPassword.valid && password.valid
                  && !confirmPassword.errors?.required && !password.errors?.required">
              
                <div class="form-group" [class.has-error]="password.invalid && password.touched">
                  <div class="input-group">
                
                    <input type="text" placeholder="Password" name="password" required class="form-control" 
                    [(ngModel)]="user.password" #password="ngModel"
                      id="password" (input)="confirmPassword.control.updateValueAndValidity()"
                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                      appCapCheckValidator appLowerCheckValidator appDigitCheckValidator appCheckMinimumValidator>
                    <span class="help-block" *ngIf="password.touched && password.errors?.required">
                      Password is required
                    </span>
                    <span class="help-block" *ngIf="password.touched && password.errors?.pattern">
                      Password is invalid<br>
                    </span>
              
                    <!-- below is the interactive instructions to satisfy password requirements -->
                    <span class="pass-block" *ngIf="password.touched && password.errors?.notCap">
                      *Password must contain at least one capital letter.
                    </span>
                    <span class="pass-block" *ngIf="password.touched && password.errors?.notLow">
                      *Password must contain at least one lower case letter.
                    </span>
                    <span class="pass-block" *ngIf="password.touched && password.errors?.notDigit">
                      *Password must contain at least one digit.
                    </span>
                    <span class="pass-block" *ngIf="password.touched && password.errors?.notMini">
                      *Password must contain a minimum of 8 characters.
                    </span>
                    
                  </div>
                </div>
              
                <div class="form-group" [class.has-error]="confirmPassword.touched && confirmPassword.invalid">
                  <div class="input-group">
                    
                    <input type="text"  placeholder="Confirm password" appConfirmEqualValidator="password" 
                    name="confirmPassword" required class="form-control"
                      [(ngModel)]="user.confirmPassword" #confirmPassword="ngModel" id="password"
                      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}">
                    <span class="help-block" *ngIf="confirmPassword.touched && confirmPassword.errors?.required">
                      Confirm password is required
                    </span>
                    <span class="help-block" *ngIf="confirmPassword.touched && 
                      confirmPassword.errors?.notEqual && !confirmPassword.errors?.required">
                      Password and Confirm Password does not match
                    </span>
                  </div>
                </div>
              </div>


              <button type="submit" name="log_User" [disabled]="registerForm.invalid" class="btn btn-block login-btn mb-4">Register</button>
            </form>
            <a href="#!" class="forgot-password-link">Forgot password?</a>
            <p class="register-card-footer-text">Already have an account? <a href="login" class="text-reset">Sign in here</a>
            </p>
            <nav class="register-card-footer-nav">
              <a href="#!">Terms of use.</a>
              <a href="#!">Privacy policy</a>
            </nav>
         </div>
      </div>
  </div>
</div>
{{registerForm.value | json}}

